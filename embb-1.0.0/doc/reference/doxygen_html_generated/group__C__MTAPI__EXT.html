<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Embedded Multicore Building Blocks V1.0.0: MTAPI Extensions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="DoxygenHTMLStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded Multicore Building Blocks V1.0.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>API</span></a></li>
      <li><a href="annotated.html"><span>Type&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MTAPI Extensions<div class="ingroups"><a class="el" href="group__C.html">C Components</a> &raquo; <a class="el" href="group__C__MTAPI.html">MTAPI</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides extensions to the standard MTAPI API.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__C__MTAPI__OPENCL"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__OPENCL.html">MTAPI OpenCL Plugin</a></td></tr>
<tr class="memdesc:group__C__MTAPI__OPENCL"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides functionality to execute tasks on OpenCL devices. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__C__MTAPI__NETWORK"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__NETWORK.html">MTAPI Network Plugin</a></td></tr>
<tr class="memdesc:group__C__MTAPI__NETWORK"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides functionality to distribute tasks across nodes in a TCP/IP network. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__C__MTAPI__CUDA"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__CUDA.html">MTAPI CUDA Plugin</a></td></tr>
<tr class="memdesc:group__C__MTAPI__CUDA"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides functionality to execute tasks on CUDA devices. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaf8067020040636f82f1527973b34540c"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__EXT.html#gaf8067020040636f82f1527973b34540c">mtapi_ext_plugin_task_start_function_t</a>) (MTAPI_IN <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> task, MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:gaf8067020040636f82f1527973b34540c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a callback function that is called when a plugin action is about to start a plugin task.  <a href="#gaf8067020040636f82f1527973b34540c">More...</a><br /></td></tr>
<tr class="separator:gaf8067020040636f82f1527973b34540c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82be3cf8d702f563655aed9995500c2d"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__EXT.html#ga82be3cf8d702f563655aed9995500c2d">mtapi_ext_plugin_task_cancel_function_t</a>) (MTAPI_IN <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> task, MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga82be3cf8d702f563655aed9995500c2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a callback function that is called when a plugin task is about to be canceled.  <a href="#ga82be3cf8d702f563655aed9995500c2d">More...</a><br /></td></tr>
<tr class="separator:ga82be3cf8d702f563655aed9995500c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c230cff899ef3cf44563d792733fd15"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__EXT.html#ga0c230cff899ef3cf44563d792733fd15">mtapi_ext_plugin_action_finalize_function_t</a>) (MTAPI_IN <a class="el" href="structmtapi__action__hndl__struct.html#a63f067469f3caabc9e92e1565588d5ad">mtapi_action_hndl_t</a> action, MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga0c230cff899ef3cf44563d792733fd15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a callback function that is called when a plugin action is about to be finalized.  <a href="#ga0c230cff899ef3cf44563d792733fd15">More...</a><br /></td></tr>
<tr class="separator:ga0c230cff899ef3cf44563d792733fd15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga30a2be5cd5c83b30aa82a3663102265b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmtapi__action__hndl__struct.html#a63f067469f3caabc9e92e1565588d5ad">mtapi_action_hndl_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__EXT.html#ga30a2be5cd5c83b30aa82a3663102265b">mtapi_ext_plugin_action_create</a> (MTAPI_IN mtapi_job_id_t job_id, MTAPI_IN <a class="el" href="group__C__MTAPI__EXT.html#gaf8067020040636f82f1527973b34540c">mtapi_ext_plugin_task_start_function_t</a> task_start_function, MTAPI_IN <a class="el" href="group__C__MTAPI__EXT.html#ga82be3cf8d702f563655aed9995500c2d">mtapi_ext_plugin_task_cancel_function_t</a> task_cancel_function, MTAPI_IN <a class="el" href="group__C__MTAPI__EXT.html#ga0c230cff899ef3cf44563d792733fd15">mtapi_ext_plugin_action_finalize_function_t</a> action_finalize_function, MTAPI_IN void *plugin_data, MTAPI_IN void *node_local_data, MTAPI_IN mtapi_size_t node_local_data_size, MTAPI_IN <a class="el" href="structmtapi__action__attributes__struct.html#ad738292d0cfce87ccebe9ccbcda05f3a">mtapi_action_attributes_t</a> *attributes, MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga30a2be5cd5c83b30aa82a3663102265b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates a plugin action.  <a href="#ga30a2be5cd5c83b30aa82a3663102265b">More...</a><br /></td></tr>
<tr class="separator:ga30a2be5cd5c83b30aa82a3663102265b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadcf3b1cdd5597a14a0673d953c679e78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__EXT.html#gadcf3b1cdd5597a14a0673d953c679e78">mtapi_ext_yield</a> ()</td></tr>
<tr class="memdesc:gadcf3b1cdd5597a14a0673d953c679e78"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function yields execution to the MTAPI scheduler for at most one task.  <a href="#gadcf3b1cdd5597a14a0673d953c679e78">More...</a><br /></td></tr>
<tr class="separator:gadcf3b1cdd5597a14a0673d953c679e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Provides extensions to the standard MTAPI API. </p>
<p>There are two extension functions defined here. One to support user defined behavior of an action to allow for actions that are not implemented locally in software, but e.g., on a remote node in a network or on an accelerator device like a GPU or an FPGA. The other one is used to specify job attributes. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaf8067020040636f82f1527973b34540c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* mtapi_ext_plugin_task_start_function_t) (MTAPI_IN <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> task, MTAPI_OUT mtapi_status_t *status)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a callback function that is called when a plugin action is about to start a plugin task. </p>
<p>This function should return MTAPI_SUCCESS if the task could be started and the appropriate MTAPI_ERR_* if not. </p>

</div>
</div>
<a class="anchor" id="ga82be3cf8d702f563655aed9995500c2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* mtapi_ext_plugin_task_cancel_function_t) (MTAPI_IN <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> task, MTAPI_OUT mtapi_status_t *status)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a callback function that is called when a plugin task is about to be canceled. </p>
<p>This function should return MTAPI_SUCCESS if the task could be canceled and the appropriate MTAPI_ERR_* if not. </p>

</div>
</div>
<a class="anchor" id="ga0c230cff899ef3cf44563d792733fd15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* mtapi_ext_plugin_action_finalize_function_t) (MTAPI_IN <a class="el" href="structmtapi__action__hndl__struct.html#a63f067469f3caabc9e92e1565588d5ad">mtapi_action_hndl_t</a> action, MTAPI_OUT mtapi_status_t *status)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a callback function that is called when a plugin action is about to be finalized. </p>
<p>This function should return MTAPI_SUCCESS if the action could be deleted and the appropriate MTAPI_ERR_* if not. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga30a2be5cd5c83b30aa82a3663102265b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmtapi__action__hndl__struct.html#a63f067469f3caabc9e92e1565588d5ad">mtapi_action_hndl_t</a> mtapi_ext_plugin_action_create </td>
          <td>(</td>
          <td class="paramtype">MTAPI_IN mtapi_job_id_t&#160;</td>
          <td class="paramname"><em>job_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN <a class="el" href="group__C__MTAPI__EXT.html#gaf8067020040636f82f1527973b34540c">mtapi_ext_plugin_task_start_function_t</a>&#160;</td>
          <td class="paramname"><em>task_start_function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN <a class="el" href="group__C__MTAPI__EXT.html#ga82be3cf8d702f563655aed9995500c2d">mtapi_ext_plugin_task_cancel_function_t</a>&#160;</td>
          <td class="paramname"><em>task_cancel_function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN <a class="el" href="group__C__MTAPI__EXT.html#ga0c230cff899ef3cf44563d792733fd15">mtapi_ext_plugin_action_finalize_function_t</a>&#160;</td>
          <td class="paramname"><em>action_finalize_function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN void *&#160;</td>
          <td class="paramname"><em>plugin_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN void *&#160;</td>
          <td class="paramname"><em>node_local_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN mtapi_size_t&#160;</td>
          <td class="paramname"><em>node_local_data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN <a class="el" href="structmtapi__action__attributes__struct.html#ad738292d0cfce87ccebe9ccbcda05f3a">mtapi_action_attributes_t</a> *&#160;</td>
          <td class="paramname"><em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_OUT mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function creates a plugin action. </p>
<p>It is called on the node where the plugin action is implemented. A plugin action is an abstract encapsulation of a user defined action that is needed to implement a job that does not represent a software action. A plugin action contains a reference to a job, callback functions to start and cancel tasks and a reference to an callback function to finalize the action. After a plugin action is created, it is referenced by the application using a node-local handle of type <code>mtapi_action_hndl_t</code>, or indirectly through a node-local job handle of type <code>mtapi_job_hndl_t</code>. A plugin action's life-cycle begins with <a class="el" href="group__C__MTAPI__EXT.html#ga30a2be5cd5c83b30aa82a3663102265b" title="This function creates a plugin action. ">mtapi_ext_plugin_action_create()</a>, and ends when <a class="el" href="group__ACTIONS.html#ga35f2524690cbd70202f5c71447023612" title="This function deletes a software action (Hardware actions exist perpetually and cannot be deleted)...">mtapi_action_delete()</a> or <a class="el" href="group__RUNTIME__INIT__SHUTDOWN.html#ga04d5a09951e5a52359f2a06a50f93988" title="Finalizes the MTAPI environment on a given MTAPI node and domain. ">mtapi_finalize()</a> is called.</p>
<p>To create an action, the application must supply the domain-wide job ID of the job associated with the action. Job IDs must be predefined in the application and runtime, of type <code>mtapi_job_id_t</code>, which is an implementation-defined type. The job ID is unique in the sense that it is unique for the job implemented by the action. However several actions may implement the same job for load balancing purposes.</p>
<p>If <code>node_local_data_size</code> is not zero, <code>node_local_data</code> specifies the start of node local data shared by action functions executed on the same node. <code>node_local_data_size</code> can be used by the runtime for cache coherency operations.</p>
<p>On success, an action handle is returned and <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. In the case where the action already exists, <code>status</code> will be set to <code>MTAPI_ERR_ACTION_EXISTS</code> and the handle returned will not be a valid handle. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_JOB_INVALID</code>  </td><td>The <code>job_id</code> is not a valid job ID, i.e., no action was created for that ID or the action has been deleted.  </td></tr>
<tr>
<td><code>MTAPI_ERR_ACTION_EXISTS</code>  </td><td>This action is already created.  </td></tr>
<tr>
<td><code>MTAPI_ERR_ACTION_LIMIT</code>  </td><td>Exceeded maximum number of actions allowed.  </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code>  </td><td>The calling node is not initialized.  </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ACTIONS.html#ga35f2524690cbd70202f5c71447023612" title="This function deletes a software action (Hardware actions exist perpetually and cannot be deleted)...">mtapi_action_delete()</a>, <a class="el" href="group__RUNTIME__INIT__SHUTDOWN.html#ga04d5a09951e5a52359f2a06a50f93988" title="Finalizes the MTAPI environment on a given MTAPI node and domain. ">mtapi_finalize()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to newly created plugin action, invalid handle on error </dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">job_id</td><td>Job id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">task_start_function</td><td>Task start function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">task_cancel_function</td><td>Task cancel function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">action_finalize_function</td><td>Finalize action function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">plugin_data</td><td>Pointer to plugin data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_local_data</td><td>Pointer to node local data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_local_data_size</td><td>Size of node local data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">attributes</td><td>Pointer to attributes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gadcf3b1cdd5597a14a0673d953c679e78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_ext_yield </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function yields execution to the MTAPI scheduler for at most one task. </p>
<dl class="section user"><dt>Concurrency</dt><dd>Not thread-safe </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 27 2017 04:05:15 for Embedded Multicore Building Blocks V1.0.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
