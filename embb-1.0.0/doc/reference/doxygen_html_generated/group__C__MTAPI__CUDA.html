<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Embedded Multicore Building Blocks V1.0.0: MTAPI CUDA Plugin</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="DoxygenHTMLStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded Multicore Building Blocks V1.0.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>API</span></a></li>
      <li><a href="annotated.html"><span>Type&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MTAPI CUDA Plugin<div class="ingroups"><a class="el" href="group__C.html">C Components</a> &raquo; <a class="el" href="group__C__MTAPI.html">MTAPI</a> &raquo; <a class="el" href="group__C__MTAPI__EXT.html">MTAPI Extensions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides functionality to execute tasks on CUDA devices.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga026b9d16f5a24b609c7d0947eee0e2b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__CUDA.html#ga026b9d16f5a24b609c7d0947eee0e2b9">mtapi_cuda_plugin_initialize</a> (MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga026b9d16f5a24b609c7d0947eee0e2b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the MTAPI CUDA environment on a previously initialized MTAPI node.  <a href="#ga026b9d16f5a24b609c7d0947eee0e2b9">More...</a><br /></td></tr>
<tr class="separator:ga026b9d16f5a24b609c7d0947eee0e2b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69471b2ce2c36a3287b7ef684c650dd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9">mtapi_cuda_plugin_finalize</a> (MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga69471b2ce2c36a3287b7ef684c650dd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalizes the MTAPI CUDA environment on the local MTAPI node.  <a href="#ga69471b2ce2c36a3287b7ef684c650dd9">More...</a><br /></td></tr>
<tr class="separator:ga69471b2ce2c36a3287b7ef684c650dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e79064a181077568c8c31c4cc98fa07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmtapi__action__hndl__struct.html#a63f067469f3caabc9e92e1565588d5ad">mtapi_action_hndl_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__CUDA.html#ga7e79064a181077568c8c31c4cc98fa07">mtapi_cuda_action_create</a> (MTAPI_IN mtapi_job_id_t job_id, MTAPI_IN char *kernel_source, MTAPI_IN char *kernel_name, MTAPI_IN mtapi_size_t local_work_size, MTAPI_IN mtapi_size_t element_size, MTAPI_IN void *node_local_data, MTAPI_IN mtapi_size_t node_local_data_size, MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga7e79064a181077568c8c31c4cc98fa07"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates a CUDA action.  <a href="#ga7e79064a181077568c8c31c4cc98fa07">More...</a><br /></td></tr>
<tr class="separator:ga7e79064a181077568c8c31c4cc98fa07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae72e018614060660c6f0ecfb911cd98f"><td class="memItemLeft" align="right" valign="top">CUcontext&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__C__MTAPI__CUDA.html#gae72e018614060660c6f0ecfb911cd98f">mtapi_cuda_get_context</a> (MTAPI_OUT mtapi_status_t *status)</td></tr>
<tr class="memdesc:gae72e018614060660c6f0ecfb911cd98f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the handle of the CUDA context used by the plugin.  <a href="#gae72e018614060660c6f0ecfb911cd98f">More...</a><br /></td></tr>
<tr class="separator:gae72e018614060660c6f0ecfb911cd98f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Provides functionality to execute tasks on CUDA devices. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga026b9d16f5a24b609c7d0947eee0e2b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_cuda_plugin_initialize </td>
          <td>(</td>
          <td class="paramtype">MTAPI_OUT mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the MTAPI CUDA environment on a previously initialized MTAPI node. </p>
<p>It must be called on all nodes using the MTAPI CUDA plugin.</p>
<p>Application software using MTAPI CUDA must call <a class="el" href="group__C__MTAPI__CUDA.html#ga026b9d16f5a24b609c7d0947eee0e2b9" title="Initializes the MTAPI CUDA environment on a previously initialized MTAPI node. ">mtapi_cuda_plugin_initialize()</a> once per node. It is an error to call <a class="el" href="group__C__MTAPI__CUDA.html#ga026b9d16f5a24b609c7d0947eee0e2b9" title="Initializes the MTAPI CUDA environment on a previously initialized MTAPI node. ">mtapi_cuda_plugin_initialize()</a> multiple times from a given node, unless <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> is called in between.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_UNKNOWN</code> </td><td>MTAPI CUDA couldn't be initialized. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a></dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Not thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga69471b2ce2c36a3287b7ef684c650dd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_cuda_plugin_finalize </td>
          <td>(</td>
          <td class="paramtype">MTAPI_OUT mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalizes the MTAPI CUDA environment on the local MTAPI node. </p>
<p>It has to be called by each node using MTAPI CUDA. It is an error to call <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> without first calling <a class="el" href="group__C__MTAPI__CUDA.html#ga026b9d16f5a24b609c7d0947eee0e2b9" title="Initializes the MTAPI CUDA environment on a previously initialized MTAPI node. ">mtapi_cuda_plugin_initialize()</a>. An MTAPI node can call <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> once for each call to <a class="el" href="group__C__MTAPI__CUDA.html#ga026b9d16f5a24b609c7d0947eee0e2b9" title="Initializes the MTAPI CUDA environment on a previously initialized MTAPI node. ">mtapi_cuda_plugin_initialize()</a>, but it is an error to call <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> multiple times from a given node unless <a class="el" href="group__C__MTAPI__CUDA.html#ga026b9d16f5a24b609c7d0947eee0e2b9" title="Initializes the MTAPI CUDA environment on a previously initialized MTAPI node. ">mtapi_cuda_plugin_initialize()</a> has been called prior to each <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> call.</p>
<p>All CUDA tasks that have not completed and that have been started on the node where <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> is called will be canceled (see <a class="el" href="group__TASKS.html#ga83dc07b03c0d52508daca84d64f96790" title="This function cancels a task and sets the task status to MTAPI_TASK_CANCELLED. ">mtapi_task_cancel()</a>). <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> blocks until all tasks that have been started on the same node return. Tasks that execute actions on the node where <a class="el" href="group__C__MTAPI__CUDA.html#ga69471b2ce2c36a3287b7ef684c650dd9" title="Finalizes the MTAPI CUDA environment on the local MTAPI node. ">mtapi_cuda_plugin_finalize()</a> is called, also block finalization of the MTAPI CUDA system on that node.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_UNKNOWN</code> </td><td>MTAPI CUDA couldn't be finalized. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__C__MTAPI__CUDA.html#ga026b9d16f5a24b609c7d0947eee0e2b9" title="Initializes the MTAPI CUDA environment on a previously initialized MTAPI node. ">mtapi_cuda_plugin_initialize()</a>, <a class="el" href="group__TASKS.html#ga83dc07b03c0d52508daca84d64f96790" title="This function cancels a task and sets the task status to MTAPI_TASK_CANCELLED. ">mtapi_task_cancel()</a></dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Not thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7e79064a181077568c8c31c4cc98fa07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmtapi__action__hndl__struct.html#a63f067469f3caabc9e92e1565588d5ad">mtapi_action_hndl_t</a> mtapi_cuda_action_create </td>
          <td>(</td>
          <td class="paramtype">MTAPI_IN mtapi_job_id_t&#160;</td>
          <td class="paramname"><em>job_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN char *&#160;</td>
          <td class="paramname"><em>kernel_source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN char *&#160;</td>
          <td class="paramname"><em>kernel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN mtapi_size_t&#160;</td>
          <td class="paramname"><em>local_work_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN mtapi_size_t&#160;</td>
          <td class="paramname"><em>element_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN void *&#160;</td>
          <td class="paramname"><em>node_local_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_IN mtapi_size_t&#160;</td>
          <td class="paramname"><em>node_local_data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MTAPI_OUT mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function creates a CUDA action. </p>
<p>It is called on the node where the user wants to execute an action on an CUDA device. A CUDA action contains a reference to a local job, the kernel source to compile and execute on the CUDA device, the name of the kernel function, a local work size (see CUDA specification for details) and the size of one element in the result buffer. After a CUDA action is created, it is referenced by the application using a node-local handle of type <code>mtapi_action_hndl_t</code>, or indirectly through a node-local job handle of type <code>mtapi_job_hndl_t</code>. A CUDA action's life-cycle begins with <a class="el" href="group__C__MTAPI__CUDA.html#ga7e79064a181077568c8c31c4cc98fa07" title="This function creates a CUDA action. ">mtapi_cuda_action_create()</a>, and ends when <a class="el" href="group__ACTIONS.html#ga35f2524690cbd70202f5c71447023612" title="This function deletes a software action (Hardware actions exist perpetually and cannot be deleted)...">mtapi_action_delete()</a> or <a class="el" href="group__RUNTIME__INIT__SHUTDOWN.html#ga04d5a09951e5a52359f2a06a50f93988" title="Finalizes the MTAPI environment on a given MTAPI node and domain. ">mtapi_finalize()</a> is called.</p>
<p>To create an action, the application must supply the domain-wide job ID of the job associated with the action. Job IDs must be predefined in the application and runtime, of type <code>mtapi_job_id_t</code>, which is an implementation-defined type. The job ID is unique in the sense that it is unique for the job implemented by the action. However several actions may implement the same job for load balancing purposes.</p>
<p>If <code>node_local_data_size</code> is not zero, <code>node_local_data</code> specifies the start of node local data shared by kernel functions executed on the same node. <code>node_local_data_size</code> can be used by the runtime for cache coherency operations.</p>
<p>On success, an action handle is returned and <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. In the case where the action already exists, <code>status</code> will be set to <code>MTAPI_ERR_ACTION_EXISTS</code> and the handle returned will not be a valid handle. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_JOB_INVALID</code>  </td><td>The <code>job_id</code> is not a valid job ID, i.e., no action was created for that ID or the action has been deleted.  </td></tr>
<tr>
<td><code>MTAPI_ERR_ACTION_EXISTS</code>  </td><td>This action is already created.  </td></tr>
<tr>
<td><code>MTAPI_ERR_ACTION_LIMIT</code>  </td><td>Exceeded maximum number of actions allowed.  </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code>  </td><td>The calling node is not initialized.  </td></tr>
<tr>
<td><code>MTAPI_ERR_UNKNOWN</code>  </td><td>The kernel could not be compiled or no CUDA device was available.  </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ACTIONS.html#ga35f2524690cbd70202f5c71447023612" title="This function deletes a software action (Hardware actions exist perpetually and cannot be deleted)...">mtapi_action_delete()</a>, <a class="el" href="group__RUNTIME__INIT__SHUTDOWN.html#ga04d5a09951e5a52359f2a06a50f93988" title="Finalizes the MTAPI environment on a given MTAPI node and domain. ">mtapi_finalize()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to newly created CUDA action, invalid handle on error </dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">job_id</td><td>Job id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">kernel_source</td><td>Pointer to kernel source </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">kernel_name</td><td>Name of the kernel function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_work_size</td><td>Size of local work group </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">element_size</td><td>Size of one element in the result buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_local_data</td><td>Data shared across tasks </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_local_data_size</td><td>Size of shared data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gae72e018614060660c6f0ecfb911cd98f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CUcontext mtapi_cuda_get_context </td>
          <td>(</td>
          <td class="paramtype">MTAPI_OUT mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the handle of the CUDA context used by the plugin. </p>
<dl class="section return"><dt>Returns</dt><dd>CUcontext used by the plugin </dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 27 2017 04:05:15 for Embedded Multicore Building Blocks V1.0.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
