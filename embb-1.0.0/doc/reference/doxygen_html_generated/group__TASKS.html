<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Embedded Multicore Building Blocks V1.0.0: Tasks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="DoxygenHTMLStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded Multicore Building Blocks V1.0.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>API</span></a></li>
      <li><a href="annotated.html"><span>Type&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Tasks<div class="ingroups"><a class="el" href="group__C.html">C Components</a> &raquo; <a class="el" href="group__C__MTAPI.html">MTAPI</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Tasks representing pieces of work "in flight" (similar to a thread handles).  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmtapi__task__attributes__struct.html">mtapi_task_attributes_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task attributes.  <a href="structmtapi__task__attributes__struct.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmtapi__task__hndl__struct.html">mtapi_task_hndl_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task handle.  <a href="structmtapi__task__hndl__struct.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae1f5e0c8001e50f64222b0f2fb39e237"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237">mtapi_task_start</a> (const mtapi_task_id_t task_id, const <a class="el" href="structmtapi__job__hndl__struct.html#aa569fed9c9d6d695c607a1d6d47bf9a8">mtapi_job_hndl_t</a> job, const void *arguments, const mtapi_size_t arguments_size, void *result_buffer, const mtapi_size_t result_size, const <a class="el" href="structmtapi__task__attributes__struct.html#ae9f3019a3f35cd5cdeeac093e3b3f14d">mtapi_task_attributes_t</a> *attributes, const <a class="el" href="structmtapi__group__hndl__struct.html#ab72b040eb066400bacac233cafff20db">mtapi_group_hndl_t</a> group, mtapi_status_t *status)</td></tr>
<tr class="memdesc:gae1f5e0c8001e50f64222b0f2fb39e237"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function schedules a task for execution.  <a href="#gae1f5e0c8001e50f64222b0f2fb39e237">More...</a><br /></td></tr>
<tr class="separator:gae1f5e0c8001e50f64222b0f2fb39e237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0765ea20297d85d72cfd16db671e1fbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd">mtapi_task_enqueue</a> (const mtapi_task_id_t task_id, const <a class="el" href="structmtapi__queue__hndl__struct.html#ad5d123ffa7c7bb4c86214dd4e3c63407">mtapi_queue_hndl_t</a> queue, const void *arguments, const mtapi_size_t arguments_size, void *result_buffer, const mtapi_size_t result_size, const <a class="el" href="structmtapi__task__attributes__struct.html#ae9f3019a3f35cd5cdeeac093e3b3f14d">mtapi_task_attributes_t</a> *attributes, const <a class="el" href="structmtapi__group__hndl__struct.html#ab72b040eb066400bacac233cafff20db">mtapi_group_hndl_t</a> group, mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga0765ea20297d85d72cfd16db671e1fbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function schedules a task for execution using a queue.  <a href="#ga0765ea20297d85d72cfd16db671e1fbd">More...</a><br /></td></tr>
<tr class="separator:ga0765ea20297d85d72cfd16db671e1fbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ec98db545b6064f22bf680f60618891"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TASKS.html#ga0ec98db545b6064f22bf680f60618891">mtapi_task_get_attribute</a> (const <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> task, const mtapi_uint_t attribute_num, void *attribute, const mtapi_size_t attribute_size, mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga0ec98db545b6064f22bf680f60618891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a copy of the attribute value that corresponds to the given <code>attribute_num</code> for the specified task.  <a href="#ga0ec98db545b6064f22bf680f60618891">More...</a><br /></td></tr>
<tr class="separator:ga0ec98db545b6064f22bf680f60618891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83dc07b03c0d52508daca84d64f96790"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TASKS.html#ga83dc07b03c0d52508daca84d64f96790">mtapi_task_cancel</a> (const <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> task, mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga83dc07b03c0d52508daca84d64f96790"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function cancels a task and sets the task status to <code>MTAPI_TASK_CANCELLED</code>.  <a href="#ga83dc07b03c0d52508daca84d64f96790">More...</a><br /></td></tr>
<tr class="separator:ga83dc07b03c0d52508daca84d64f96790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e0b06a9470b39700b33e425b7b345c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TASKS.html#ga6e0b06a9470b39700b33e425b7b345c4">mtapi_task_wait</a> (const <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> task, const mtapi_timeout_t timeout, mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga6e0b06a9470b39700b33e425b7b345c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function waits for the completion of the specified task.  <a href="#ga6e0b06a9470b39700b33e425b7b345c4">More...</a><br /></td></tr>
<tr class="separator:ga6e0b06a9470b39700b33e425b7b345c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Tasks representing pieces of work "in flight" (similar to a thread handles). </p>
<p>A task is associated with a job object, which is associated with one or more actions implementing the same job for load balancing purposes. A task may optionally be associated with a task group. A task has attributes, and an internal state. A task begins its lifetime with a call to <a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237" title="This function schedules a task for execution. ">mtapi_task_start()</a> or <a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd" title="This function schedules a task for execution using a queue. ">mtapi_task_enqueue()</a>. A task is referenced by a handle of type <code>mtapi_task_hndl_t</code>. The underlying type of <code>mtapi_task_hndl_t</code> is implementation defined. Task handles may be copied, assigned, and passed as arguments, but otherwise the application should make no assumptions about the internal representation of a task handle.</p>
<p>Once a task is started, it is possible to wait for task completion from other parts of the program. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae1f5e0c8001e50f64222b0f2fb39e237"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> mtapi_task_start </td>
          <td>(</td>
          <td class="paramtype">const mtapi_task_id_t&#160;</td>
          <td class="paramname"><em>task_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmtapi__job__hndl__struct.html#aa569fed9c9d6d695c607a1d6d47bf9a8">mtapi_job_hndl_t</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_size_t&#160;</td>
          <td class="paramname"><em>arguments_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>result_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_size_t&#160;</td>
          <td class="paramname"><em>result_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmtapi__task__attributes__struct.html#ae9f3019a3f35cd5cdeeac093e3b3f14d">mtapi_task_attributes_t</a> *&#160;</td>
          <td class="paramname"><em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmtapi__group__hndl__struct.html#ab72b040eb066400bacac233cafff20db">mtapi_group_hndl_t</a>&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function schedules a task for execution. </p>
<p>A task is associated with a job. A job is associated with one or more actions. An action provides an action function, which is the executable implementation of a job. If more than one action is associated with the job, the runtime system chooses dynamically which action is used for execution for load balancing purposes.</p>
<p><code>task_id</code> is an optional ID provided by the application for debugging purposes. If not needed, it can be set to <code>MTAPI_TASK_ID_NONE</code>. The minimum and maximum values for <code>task_id</code> may be derived from <code>MTAPI_MIN_USER_TASK_ID</code> and <code>MTAPI_MAX_USER_TASK_ID</code>.</p>
<p><code>job</code> must be a handle to a job obtained by a previous call to <a class="el" href="group__JOBS.html#ga98478d5d43e829490880b5eba7363a8d" title="Given a job_id, this function returns the MTAPI handle for referencing the actions implementing the j...">mtapi_job_get()</a>.</p>
<p>If <code>arguments_size</code> is not zero, then arguments must point to data of <code>arguments_size</code> bytes. The arguments will be transferred by the runtime from the node where the action was created to the executing node if necessary. Marshalling of arguments is not part of the MTAPI specification and is implementation-defined.</p>
<p>If <code>attributes</code> is <code>MTAPI_NULL</code>, the task will be started with default attribute values. Otherwise <code>attributes</code> must point to a task attributes object previously prepared using <a class="el" href="structmtapi__task__attributes__struct.html#a5fe0671e67fd61a2f55dfafa68585010" title="This function initializes a task attributes object. ">mtapi_taskattr_init()</a> and <a class="el" href="structmtapi__task__attributes__struct.html#a570829d646a04e2f29a130768ddb4d10" title="This function sets task attribute values in a task attributes object. ">mtapi_taskattr_set()</a>. The attributes of a task cannot be changed after the task is created.</p>
<p><code>group</code> must be set to <code>MTAPI_GROUP_NONE</code> if the task is not part of a task group. Otherwise <code>group</code> must be a group handle obtained by a previous call to <a class="el" href="group__TASK__GROUPS.html#gac4c28d1b2d322739a6dfc55eff911bec" title="This function creates a task group and returns a handle to the group. ">mtapi_group_create()</a>.</p>
<p>On success, a task handle is returned and <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_TASK_LIMIT</code> </td><td>Exceeded maximum number of tasks allowed. </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code> </td><td>The calling node is not initialized. </td></tr>
<tr>
<td><code>MTAPI_ERR_PARAMETER</code> </td><td>Invalid attributes parameter. </td></tr>
<tr>
<td><code>MTAPI_ERR_GROUP_INVALID</code> </td><td>Argument is not a valid group handle. </td></tr>
<tr>
<td><code>MTAPI_ERR_JOB_INVALID</code> </td><td>The associated job is not valid. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__JOBS.html#ga98478d5d43e829490880b5eba7363a8d" title="Given a job_id, this function returns the MTAPI handle for referencing the actions implementing the j...">mtapi_job_get()</a>, <a class="el" href="structmtapi__task__attributes__struct.html#a5fe0671e67fd61a2f55dfafa68585010" title="This function initializes a task attributes object. ">mtapi_taskattr_init()</a>, <a class="el" href="structmtapi__task__attributes__struct.html#a570829d646a04e2f29a130768ddb4d10" title="This function sets task attribute values in a task attributes object. ">mtapi_taskattr_set()</a>, <a class="el" href="group__TASK__GROUPS.html#gac4c28d1b2d322739a6dfc55eff911bec" title="This function creates a task group and returns a handle to the group. ">mtapi_group_create()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to newly started task, invalid handle on error </dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task_id</td><td>Task id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">job</td><td>Job handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arguments</td><td>Pointer to arguments </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arguments_size</td><td>Size of arguments </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result_buffer</td><td>Pointer to result buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">result_size</td><td>Size of one result </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attributes</td><td>Pointer to attributes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">group</td><td>Group handle, may be <code>MTAPI_GROUP_NONE</code> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0765ea20297d85d72cfd16db671e1fbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a> mtapi_task_enqueue </td>
          <td>(</td>
          <td class="paramtype">const mtapi_task_id_t&#160;</td>
          <td class="paramname"><em>task_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmtapi__queue__hndl__struct.html#ad5d123ffa7c7bb4c86214dd4e3c63407">mtapi_queue_hndl_t</a>&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_size_t&#160;</td>
          <td class="paramname"><em>arguments_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>result_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_size_t&#160;</td>
          <td class="paramname"><em>result_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmtapi__task__attributes__struct.html#ae9f3019a3f35cd5cdeeac093e3b3f14d">mtapi_task_attributes_t</a> *&#160;</td>
          <td class="paramname"><em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmtapi__group__hndl__struct.html#ab72b040eb066400bacac233cafff20db">mtapi_group_hndl_t</a>&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function schedules a task for execution using a queue. </p>
<p>A queue is a task associated with a job. A job is associated with one or more actions. An action provides an action function, which is the executable implementation of a job.</p>
<p><code>task_id</code> is an optional ID provided by the application for debugging purposes. If not needed, it can be set to <code>MTAPI_TASK_ID_NONE</code>. The underlying type of <code>mtapi_task_id_t</code> is implementation-defined. The minimum and maximum values for <code>task_id</code> may be derived from <code>MTAPI_MIN_USER_TASK_ID</code> and <code>MTAPI_MAX_USER_TASK_ID</code>.</p>
<p><code>queue</code> must be a handle to a queue obtained by a previous call to <a class="el" href="group__QUEUES.html#ga59d8efd8cf04d9f1f57246fb559f4ac0" title="This function creates a software queue object and associates it with the specified job...">mtapi_queue_create()</a>.</p>
<p>If <code>arguments_size</code> is not zero, then arguments must point to data of <code>arguments_size</code> bytes. The arguments will be transferred by the runtime from the node where the action was created to the executing node. Marshalling of arguments is not part of the MTAPI specification and is implementation-defined.</p>
<p>If <code>attributes</code> is <code>MTAPI_NULL</code>, the task will be started with default attribute values. Otherwise <code>attributes</code> must point to a task attributes object previously prepared using <a class="el" href="structmtapi__task__attributes__struct.html#a5fe0671e67fd61a2f55dfafa68585010" title="This function initializes a task attributes object. ">mtapi_taskattr_init()</a> and <a class="el" href="structmtapi__task__attributes__struct.html#a570829d646a04e2f29a130768ddb4d10" title="This function sets task attribute values in a task attributes object. ">mtapi_taskattr_set()</a>. Once a task has been enqueued, its attributes may not be changed.</p>
<p><code>group</code> must be set to <code>MTAPI_GROUP_NONE</code> if the task is not part of a task group. Otherwise <code>group</code> must be a group handle obtained by a previous call to <a class="el" href="group__TASK__GROUPS.html#gac4c28d1b2d322739a6dfc55eff911bec" title="This function creates a task group and returns a handle to the group. ">mtapi_group_create()</a>.</p>
<p>On success, a task handle is returned and <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_TASK_LIMIT</code> </td><td>Exceeded maximum number of tasks allowed. </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code> </td><td>The calling node is not initialized. </td></tr>
<tr>
<td><code>MTAPI_ERR_PARAMETER</code> </td><td>Invalid attributes parameter. </td></tr>
<tr>
<td><code>MTAPI_ERR_QUEUE_INVALID</code> </td><td>Argument is not a valid queue handle. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__QUEUES.html#ga59d8efd8cf04d9f1f57246fb559f4ac0" title="This function creates a software queue object and associates it with the specified job...">mtapi_queue_create()</a>, <a class="el" href="structmtapi__task__attributes__struct.html#a5fe0671e67fd61a2f55dfafa68585010" title="This function initializes a task attributes object. ">mtapi_taskattr_init()</a>, <a class="el" href="structmtapi__task__attributes__struct.html#a570829d646a04e2f29a130768ddb4d10" title="This function sets task attribute values in a task attributes object. ">mtapi_taskattr_set()</a>, <a class="el" href="group__TASK__GROUPS.html#gac4c28d1b2d322739a6dfc55eff911bec" title="This function creates a task group and returns a handle to the group. ">mtapi_group_create()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to newly enqueued task, invalid handle on error </dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task_id</td><td>Task id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>Queue handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arguments</td><td>Pointer to arguments </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arguments_size</td><td>Size of arguments </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result_buffer</td><td>Pointer to result buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">result_size</td><td>Size of one result </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attributes</td><td>Pointer to task attributes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">group</td><td>Group handle, may be <code>MTAPI_GROUP_NONE</code> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0ec98db545b6064f22bf680f60618891"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_task_get_attribute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a>&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_uint_t&#160;</td>
          <td class="paramname"><em>attribute_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>attribute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_size_t&#160;</td>
          <td class="paramname"><em>attribute_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a copy of the attribute value that corresponds to the given <code>attribute_num</code> for the specified task. </p>
<p>The attribute value will be returned in <code>*attribute</code>. Note that task attributes may be queried but may not be changed after a task has been created.</p>
<p><code>task</code> must be a valid handle to a task that was obtained by a previous call to <a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237" title="This function schedules a task for execution. ">mtapi_task_start()</a> or <a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd" title="This function schedules a task for execution using a queue. ">mtapi_task_enqueue()</a>.</p>
<p>See <a class="el" href="structmtapi__task__attributes__struct.html#a570829d646a04e2f29a130768ddb4d10" title="This function sets task attribute values in a task attributes object. ">mtapi_taskattr_set()</a> for a list of predefined attribute numbers and the sizes of the attribute values. The application is responsible for allocating sufficient space for the returned attribute value and for setting <code>attribute_size</code> to the exact size in bytes of the attribute value.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code> and the attribute value is returned in <code>*attribute</code>. On error, <code>*status</code> is set to the appropriate error defined below and the attribute value is undefined. If this function is called on a task that no longer exists, an <code>MTAPI_ERR_TASK_INVALID</code> error code will be returned. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_PARAMETER</code> </td><td>Invalid attribute parameter. </td></tr>
<tr>
<td><code>MTAPI_ERR_TASK_INVALID</code> </td><td>Argument is not a valid task handle. </td></tr>
<tr>
<td><code>MTAPI_ERR_ATTR_NUM</code> </td><td>Unknown attribute number. </td></tr>
<tr>
<td><code>MTAPI_ERR_ATTR_SIZE</code> </td><td>Incorrect attribute size. </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code> </td><td>The calling node is not initialized. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237" title="This function schedules a task for execution. ">mtapi_task_start()</a>, <a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd" title="This function schedules a task for execution using a queue. ">mtapi_task_enqueue()</a>, <a class="el" href="structmtapi__task__attributes__struct.html#a570829d646a04e2f29a130768ddb4d10" title="This function sets task attribute values in a task attributes object. ">mtapi_taskattr_set()</a></dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe and wait-free </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>Task handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attribute_num</td><td>Attribute id </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">attribute</td><td>Pointer to attribute value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attribute_size</td><td>Size of attribute value </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga83dc07b03c0d52508daca84d64f96790"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_task_cancel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a>&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function cancels a task and sets the task status to <code>MTAPI_TASK_CANCELLED</code>. </p>
<p><code>task</code> must be a valid handle to a task that was obtained by a previous call to <a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237" title="This function schedules a task for execution. ">mtapi_task_start()</a> or <a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd" title="This function schedules a task for execution using a queue. ">mtapi_task_enqueue()</a>.</p>
<p>If the execution of a task has not been started, the runtime system might remove the task from the runtime-internal task queues. If task execution is already running, an action function implemented in software can poll the task status and react accordingly.</p>
<p>Since the task is referenced by a task handle which can only be used node-locally, a task can be canceled only on the node where the task was created.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_TASK_INVALID</code> </td><td>Argument is not a valid task handle. </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code> </td><td>The calling node is not initialized. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237" title="This function schedules a task for execution. ">mtapi_task_start()</a>, <a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd" title="This function schedules a task for execution using a queue. ">mtapi_task_enqueue()</a></dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe and wait-free </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>Task handle </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6e0b06a9470b39700b33e425b7b345c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_task_wait </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmtapi__task__hndl__struct.html#a88bc32c9b778352554b2fa520d2ce729">mtapi_task_hndl_t</a>&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_timeout_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function waits for the completion of the specified task. </p>
<p><code>task</code> must be a valid handle to a task that was obtained by a previous call to <a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237" title="This function schedules a task for execution. ">mtapi_task_start()</a> or <a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd" title="This function schedules a task for execution using a queue. ">mtapi_task_enqueue()</a>. The task handle becomes invalid on a successful wait, i.e., after the task had run to completion and <a class="el" href="group__TASKS.html#ga6e0b06a9470b39700b33e425b7b345c4" title="This function waits for the completion of the specified task. ">mtapi_task_wait()</a> returns <code>MTAPI_SUCCESS</code>.</p>
<p><code>timeout</code> determines how long the function should wait for tasks already started via that queue to finish. The underlying type of <code>mtapi_timeout_t</code> is implementation-defined. If <code>timeout</code> is a constant 0 or the symbolic constant <code>MTAPI_NOWAIT</code>, this function does not block and returns immediately. If <code>timeout</code> is set to <code>MTAPI_INFINITE</code> the function may block infinitely. Other values for <code>timeout</code> and the units of measure are implementation-defined.</p>
<p>Results of completed tasks can be obtained via <code>result_buffer</code> associated with the task. The size of the buffer has to be equal to the result size written in the action code. If the result is not needed by the calling code, <code>result_buffer</code> may be set to <code>MTAPI_NULL</code>. For multi-instance tasks, the result buffer is filled by an array of all the task instances' results. I.e., the result buffer has to be allocated big enough (number of instances times size of result).</p>
<p>Calling <a class="el" href="group__TASKS.html#ga6e0b06a9470b39700b33e425b7b345c4" title="This function waits for the completion of the specified task. ">mtapi_task_wait()</a> more than once for the same task results in undefined behavior.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. If this function is called on a task that no longer exists, an <code>MTAPI_ERR_TASK_INVALID</code> error code will be returned. <code>status</code> will be <code>MTAPI_ERR_ARG_SIZE</code> or <code>MTAPI_ERR_RESULT_SIZE</code> if the sizes of arguments or result buffer do not match. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_TASK_INVALID</code>  </td><td>Argument is not a valid task handle.  </td></tr>
<tr>
<td><code>MTAPI_TIMEOUT</code>  </td><td>Timeout was reached.  </td></tr>
<tr>
<td><code>MTAPI_ERR_PARAMETER</code>  </td><td>Invalid timeout parameter.  </td></tr>
<tr>
<td><code>MTAPI_ERR_TASK_CANCELLED</code>  </td><td>The task has been canceled because of <a class="el" href="group__TASKS.html#ga83dc07b03c0d52508daca84d64f96790" title="This function cancels a task and sets the task status to MTAPI_TASK_CANCELLED. ">mtapi_task_cancel()</a> was called before the task was executed or the error code was set to <code>MTAPI_ERR_TASK_CANCELLED</code> by <a class="el" href="group__ACTION__FUNCTIONS.html#ga4620187dc8dfe9cd25ada6689c61006e" title="This function can be called from an action function to set the status that can be obtained by a subse...">mtapi_context_status_set()</a> in the action function.  </td></tr>
<tr>
<td><code>MTAPI_ERR_WAIT_PENDING</code>  </td><td><a class="el" href="group__TASKS.html#ga6e0b06a9470b39700b33e425b7b345c4" title="This function waits for the completion of the specified task. ">mtapi_task_wait()</a> had already been called for the same task and the first wait call is still pending.  </td></tr>
<tr>
<td><code>MTAPI_ERR_ACTION_CANCELLED</code>  </td><td>Action execution was canceled by the action function (<a class="el" href="group__ACTION__FUNCTIONS.html#ga4620187dc8dfe9cd25ada6689c61006e" title="This function can be called from an action function to set the status that can be obtained by a subse...">mtapi_context_status_set()</a>).  </td></tr>
<tr>
<td><code>MTAPI_ERR_ACTION_FAILED</code>  </td><td>Error set by action function (<a class="el" href="group__ACTION__FUNCTIONS.html#ga4620187dc8dfe9cd25ada6689c61006e" title="This function can be called from an action function to set the status that can be obtained by a subse...">mtapi_context_status_set()</a>).  </td></tr>
<tr>
<td><code>MTAPI_ERR_ACTION_DELETED</code>  </td><td>All actions associated with the task have been deleted before the execution of the task was started or the error code has been set in the action function to <code>MTAPI_ERR_ACTION_DELETED</code> by <a class="el" href="group__ACTION__FUNCTIONS.html#ga4620187dc8dfe9cd25ada6689c61006e" title="This function can be called from an action function to set the status that can be obtained by a subse...">mtapi_context_status_set()</a>.  </td></tr>
<tr>
<td><code>MTAPI_ERR_ARG_SIZE</code>  </td><td>The size of the arguments expected by action differs from arguments size of the caller.  </td></tr>
<tr>
<td><code>MTAPI_ERR_RESULT_SIZE</code>  </td><td>The size of the result buffer expected by action differs from result buffer size of the caller.  </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code>  </td><td>The calling node is not initialized.  </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__TASKS.html#gae1f5e0c8001e50f64222b0f2fb39e237" title="This function schedules a task for execution. ">mtapi_task_start()</a>, <a class="el" href="group__TASKS.html#ga0765ea20297d85d72cfd16db671e1fbd" title="This function schedules a task for execution using a queue. ">mtapi_task_enqueue()</a>, <a class="el" href="group__TASKS.html#ga6e0b06a9470b39700b33e425b7b345c4" title="This function waits for the completion of the specified task. ">mtapi_task_wait()</a>, <a class="el" href="group__TASKS.html#ga83dc07b03c0d52508daca84d64f96790" title="This function cancels a task and sets the task status to MTAPI_TASK_CANCELLED. ">mtapi_task_cancel()</a>, <a class="el" href="group__ACTION__FUNCTIONS.html#ga4620187dc8dfe9cd25ada6689c61006e" title="This function can be called from an action function to set the status that can be obtained by a subse...">mtapi_context_status_set()</a></dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>Task handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout duration in milliseconds </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 27 2017 04:05:15 for Embedded Multicore Building Blocks V1.0.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
