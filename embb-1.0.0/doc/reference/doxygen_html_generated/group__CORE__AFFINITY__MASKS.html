<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Embedded Multicore Building Blocks V1.0.0: Core Affinities</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="DoxygenHTMLStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded Multicore Building Blocks V1.0.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>API</span></a></li>
      <li><a href="annotated.html"><span>Type&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Core Affinities<div class="ingroups"><a class="el" href="group__C.html">C Components</a> &raquo; <a class="el" href="group__C__MTAPI.html">MTAPI</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Affinities for executing action functions on subsets of cores.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga22deaa7665aae5699dcf424d779925d0"><td class="memItemLeft" align="right" valign="top">typedef mtapi_uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a></td></tr>
<tr class="memdesc:ga22deaa7665aae5699dcf424d779925d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Core affinity type.  <a href="#ga22deaa7665aae5699dcf424d779925d0">More...</a><br /></td></tr>
<tr class="separator:ga22deaa7665aae5699dcf424d779925d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1ab605c3ec131bb82fdff2e2f68e5625"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga1ab605c3ec131bb82fdff2e2f68e5625">mtapi_affinity_init</a> (<a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a> *mask, const mtapi_boolean_t affinity, mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga1ab605c3ec131bb82fdff2e2f68e5625"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes an affinity mask object.  <a href="#ga1ab605c3ec131bb82fdff2e2f68e5625">More...</a><br /></td></tr>
<tr class="separator:ga1ab605c3ec131bb82fdff2e2f68e5625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga512bcad367995c4b4511ae954d933548"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga512bcad367995c4b4511ae954d933548">mtapi_affinity_set</a> (<a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a> *mask, const mtapi_uint_t core_num, const mtapi_boolean_t affinity, mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga512bcad367995c4b4511ae954d933548"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to change the default values of an affinity mask object.  <a href="#ga512bcad367995c4b4511ae954d933548">More...</a><br /></td></tr>
<tr class="separator:ga512bcad367995c4b4511ae954d933548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fe8a192068316e2654e5267dc81f0e9"><td class="memItemLeft" align="right" valign="top">mtapi_boolean_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga8fe8a192068316e2654e5267dc81f0e9">mtapi_affinity_get</a> (<a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a> *mask, const mtapi_uint_t core_num, mtapi_status_t *status)</td></tr>
<tr class="memdesc:ga8fe8a192068316e2654e5267dc81f0e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the affinity that corresponds to the given <code>core_num</code> for this affinity mask.  <a href="#ga8fe8a192068316e2654e5267dc81f0e9">More...</a><br /></td></tr>
<tr class="separator:ga8fe8a192068316e2654e5267dc81f0e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Affinities for executing action functions on subsets of cores. </p>
<p>To set core affinities, the application must allocate an affinity mask object of type <code>mtapi_affinity_t</code> and initialize it with a call to <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga1ab605c3ec131bb82fdff2e2f68e5625" title="This function initializes an affinity mask object. ">mtapi_affinity_init()</a>. Affinities are specified by calling <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga512bcad367995c4b4511ae954d933548" title="This function is used to change the default values of an affinity mask object. ">mtapi_affinity_set()</a>. The application must also allocate and initialize an action attributes object of type <code>mtapi_action_attributes_t</code>. The affinity mask object is then passed to <a class="el" href="structmtapi__action__attributes__struct.html#ab6f54377248f15bdb4d9661336f1cf15" title="This function sets action attribute values in an action attributes object. ">mtapi_actionattr_set()</a> to set the prescribed affinities in the action attributes object. The action attributes object is then passed to <a class="el" href="group__ACTIONS.html#ga633fb15ca5c076357f084e432902e48a" title="This function creates a software action (hardware actions are considered to be pre-existent and do no...">mtapi_action_create()</a> to create a new action with those attributes.</p>
<p>It is in the nature of core affinities to be highly hardware dependent. The least common denominator for different architectures is enabling and disabling core numbers in the affinity mask. Action-to-core affinities can be set via the action attribute <code>MTAPI_ACTION_AFFINITY</code> during the creation of an action. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga22deaa7665aae5699dcf424d779925d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef mtapi_uint64_t <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Core affinity type. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga1ab605c3ec131bb82fdff2e2f68e5625"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_affinity_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a> *&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_boolean_t&#160;</td>
          <td class="paramname"><em>affinity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes an affinity mask object. </p>
<p>The affinity to all cores will be initialized to the value of affinity. This function should be called prior to calling <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga512bcad367995c4b4511ae954d933548" title="This function is used to change the default values of an affinity mask object. ">mtapi_affinity_set()</a> to specify non-default affinity settings. The affinity mask object may then be used to set the <code>MTAPI_ACTION_AFFINITY</code> attribute when creating an action with <a class="el" href="group__ACTIONS.html#ga633fb15ca5c076357f084e432902e48a" title="This function creates a software action (hardware actions are considered to be pre-existent and do no...">mtapi_action_create()</a>.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_AFFINITY_MASK</code> </td><td>Invalid mask parameter. </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code> </td><td>The calling node is not initialized. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga512bcad367995c4b4511ae954d933548" title="This function is used to change the default values of an affinity mask object. ">mtapi_affinity_set()</a>, <a class="el" href="group__ACTIONS.html#ga633fb15ca5c076357f084e432902e48a" title="This function creates a software action (hardware actions are considered to be pre-existent and do no...">mtapi_action_create()</a></dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Not thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td>Pointer to affinity mask </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">affinity</td><td>Initial affinity </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga512bcad367995c4b4511ae954d933548"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtapi_affinity_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a> *&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_uint_t&#160;</td>
          <td class="paramname"><em>core_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_boolean_t&#160;</td>
          <td class="paramname"><em>affinity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is used to change the default values of an affinity mask object. </p>
<p>The affinity mask object can then be passed to <a class="el" href="structmtapi__action__attributes__struct.html#ab6f54377248f15bdb4d9661336f1cf15" title="This function sets action attribute values in an action attributes object. ">mtapi_actionattr_set()</a> to set the <code>MTAPI_ACTION_AFFINITY</code> action attribute. An action function will be executed on a core only if the core's affinity is set to <code>MTAPI_TRUE</code>. Calls to <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga512bcad367995c4b4511ae954d933548" title="This function is used to change the default values of an affinity mask object. ">mtapi_affinity_set()</a> have no effect on action attributes after the action has been created.</p>
<p><code>mask</code> must be a pointer to an affinity mask object previously initialized with <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga1ab605c3ec131bb82fdff2e2f68e5625" title="This function initializes an affinity mask object. ">mtapi_affinity_init()</a>.</p>
<p>The <code>core_num</code> is a hardware- and implementation-specific numeric identifier for a single core of the current node.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_AFFINITY_MASK</code> </td><td>Invalid mask parameter. </td></tr>
<tr>
<td><code>MTAPI_ERR_CORE_NUM</code> </td><td>Unknown core number. </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code> </td><td>The calling node is not initialized. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structmtapi__action__attributes__struct.html#ab6f54377248f15bdb4d9661336f1cf15" title="This function sets action attribute values in an action attributes object. ">mtapi_actionattr_set()</a>, <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga1ab605c3ec131bb82fdff2e2f68e5625" title="This function initializes an affinity mask object. ">mtapi_affinity_init()</a></dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Not thread-safe </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mask</td><td>Pointer to affinity mask </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">core_num</td><td>Core number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">affinity</td><td>Affinity to given core </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8fe8a192068316e2654e5267dc81f0e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mtapi_boolean_t mtapi_affinity_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga22deaa7665aae5699dcf424d779925d0">mtapi_affinity_t</a> *&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mtapi_uint_t&#160;</td>
          <td class="paramname"><em>core_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mtapi_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the affinity that corresponds to the given <code>core_num</code> for this affinity mask. </p>
<p><code>mask</code> is a pointer to an affinity mask object previously initialized with <a class="el" href="group__CORE__AFFINITY__MASKS.html#ga1ab605c3ec131bb82fdff2e2f68e5625" title="This function initializes an affinity mask object. ">mtapi_affinity_init()</a>.</p>
<p>Note that affinities may be queried but may not be changed for an action after it has been created. If affinities need to be modified at runtime, new actions must be created.</p>
<p>On success, <code>*status</code> is set to <code>MTAPI_SUCCESS</code>. On error, <code>*status</code> is set to the appropriate error defined below. </p><table class="doxtable">
<tr>
<th>Error code </th><th>Description  </th></tr>
<tr>
<td><code>MTAPI_ERR_AFFINITY_MASK</code> </td><td>Invalid mask parameter. </td></tr>
<tr>
<td><code>MTAPI_ERR_CORE_NUM</code> </td><td>Unknown core number. </td></tr>
<tr>
<td><code>MTAPI_ERR_NODE_NOTINIT</code> </td><td>The calling node is not initialized. </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CORE__AFFINITY__MASKS.html#ga1ab605c3ec131bb82fdff2e2f68e5625" title="This function initializes an affinity mask object. ">mtapi_affinity_init()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>MTAPI_TRUE</code> if affinity to <code>core_num</code> is set, <code>MTAPI_FALSE</code> otherwise </dd></dl>
<dl class="section user"><dt>Concurrency</dt><dd>Thread-safe and wait-free </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td>Pointer to affinity mask </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">core_num</td><td>Core number </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Pointer to error code, may be <code>MTAPI_NULL</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 27 2017 04:05:15 for Embedded Multicore Building Blocks V1.0.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
